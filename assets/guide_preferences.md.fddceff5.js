import{_ as e,D as n,o,c as l,G as p,R as s}from"./chunks/framework.14f187fd.js";const _=JSON.parse('{"title":"用户偏好设置","description":"","frontmatter":{},"headers":[],"relativePath":"guide/preferences.md"}'),t={name:"guide/preferences.md"},c=s(`<h1 id="用户偏好设置" tabindex="-1">用户偏好设置 <sup class="pro-badge"></sup> <a class="header-anchor" href="#用户偏好设置" aria-label="Permalink to &quot;用户偏好设置 &lt;sup class=&quot;pro-badge&quot; /&gt;&quot;">​</a></h1><p>如果希望将框架的部分应用配置项暴露给用户，让用户可以自行设置，那么可以使用用户偏好设置功能。</p><h2 id="开启" tabindex="-1">开启 <a class="header-anchor" href="#开启" aria-label="Permalink to &quot;开启&quot;">​</a></h2><p>在应用配置中设置：</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight has-highlighted-lines"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> globalSettings</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Settings</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">all</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">app</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">enableUserPreferences</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div>`,5),r=s(`<h2 id="定制偏好设置内容" tabindex="-1">定制偏好设置内容 <a class="header-anchor" href="#定制偏好设置内容" aria-label="Permalink to &quot;定制偏好设置内容&quot;">​</a></h2><p>然后打开 <code>/src/layouts/components/Preferences/index.vue</code> 文件，你可以在文件里进一步定制用户偏好设置里的内容：</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> preferences </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ref</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">Settings</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">all</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">app</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">colorScheme</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> settingsDefault</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">app</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">colorScheme</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">theme</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> settingsDefault</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">app</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">theme</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">enableProgress</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> settingsDefault</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">app</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">enableProgress</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">...</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span></code></pre></div><p>如果仔细对比，会发现这里的配置项并不是框架的完整应用配置，这是因为有部分配置项并不适合暴露给用户，比如 <code>app.enableUserPreferences</code> 这个配置项就是用来控制是否开启用户偏好设置的，如果开启了用户偏好设置，那么这个配置项就不应该再暴露给用户了，否则用户就可以关闭用户偏好设置了，这样就没有意义了。再比如 <code>app.routeBaseOn</code> 这个配置项是用来控制路由数据来源的，修改它会直接影响代码的调整，所以也是不能暴露给用户的。</p><p>所以请勿扩展这里的配置项，你需要做的就是将不需要暴露给用户的配置项删除或注释（ <code>&lt;template&gt;</code> 中的代码无需删除或注释，框架已经做了容错处理）。</p><h2 id="处理请求" tabindex="-1">处理请求 <a class="header-anchor" href="#处理请求" aria-label="Permalink to &quot;处理请求&quot;">​</a></h2><p>当定制好了用户偏好设置内容后，还需要修改页面中两处请求代码，它们分别是 <code>获取用户偏好设置</code> 和 <code>保存用户偏好设置</code> ，同时也需要到 <code>/src/store/modules/user.ts</code> 文件中修改 <code>getPreferences</code> 函数。</p><div class="tip custom-block"><p class="custom-block-title">建议</p><p>为减轻后端处理，数据会直接以 JSON 字符串进行存储，建议后端可以在用户表增加相关字段，并将字段类型设为 <code>lonetext</code> 。</p></div>`,8);function D(F,y,i,C,A,d){const a=n("ZoomImg");return o(),l("div",null,[c,p(a,{src:"/preferences.png"}),r])}const g=e(t,[["render",D]]);export{_ as __pageData,g as default};
